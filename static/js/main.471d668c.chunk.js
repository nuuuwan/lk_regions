(this.webpackJsonptemplate_react=this.webpackJsonptemplate_react||[]).push([[0],{173:function(e,t,n){},174:function(e,t,n){},181:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var r,a,u=n(0),c=n.n(u),i=n(64),o=n.n(i),s=(n(173),n(174),n(3)),l=n.n(s),p=n(11),b=n(12),d=n(29),f=n(31),v=n(9),h=n(17),g=n(7),j=new(n(176)),O=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"buildIndex",value:function(){var e=Object(v.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(v.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,e.abrupt("return",t.reduce((function(e,t,n){return e[t]=r[n],e}),{}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"invertDict",value:function(e){return Object.entries(e).reduce((function(e,t){var n=Object(g.a)(t,2),r=n[0],a=n[1];return a&&(e[a]||(e[a]=[]),e[a].push(r)),e}),{})}}]),e}(),m=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"number",value:function(e){return e?e>1e6?(e/1e6).toPrecision(3)+"M":e>1e3?(e/1e3).toPrecision(3)+"K":e:"-"}},{key:"percent",value:function(e,t){if(!t||!e)return"-";var n=e/t;return n<.01?"<1%":(100*n).toPrecision(3)+"%"}}]),e}(),x=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"mean",value:function(e){var t=e.length;return h.b.sum(e)/t}},{key:"variance",value:function(t){var n=t.length;return h.b.sum(t.map((function(e){return e*e})))/n-e.mean(t)}},{key:"stdev",value:function(t){return Math.sqrt(e.variance(t))}}]),e}(),y=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"get",value:function(){var e=Object(v.a)(l.a.mark((function e(t,n){var r,a,u,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=j.get(t))){e.next=3;break}return e.abrupt("return",JSON.parse(r));case 3:if(!(a=localStorage.getItem(t))){e.next=7;break}return j.set(t,a),e.abrupt("return",JSON.parse(a));case 7:return e.next=9,n();case 9:u=e.sent,c=JSON.stringify(u),j.set(t,c);try{localStorage.setItem(t,c)}catch(i){localStorage.clear()}return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),_="hsl(355, 63%, 34%)",k="hsl(21, 100%, 50%)",w="hsl(165, 100%, 17%)",I={SLFP:"blue",PA:"blue",UPFA:"blue",SLPP:_,UNP:"green",NDF:"green",SJB:"green",JVP:"red",JJB:"red",LSSP:"red",ACTC:k,ITAK:k,AITC:"yellow",TMVP:"red",MNA:"darkgreen",SLMC:"darkgreen",EPDP:"red",TULF:"red",SLMP:"purple",other:"gray",others:"gray",bharatha:"cyan",burgher:"purple",chetty:"blue",indian_tamil:k,tamil:k,malay:w,moor:w,muslim:w,sinhalese:_,sri_lankan_tamil:k,buddhist:"hsl(43, 100%, 50%)",islam:w,hindu:k,roman_catholic:"purple",other_christian:"blue",christian:"purple",female:"pink",male:"lightblue",son_or_daughter:"green",head:"blue",wife_or_husband:"pink",grandchild_or_great_grand_child:"darkgreen",other_relative:"yellow",non_relative:"silver",son_or_daughter_in_law:"lightgreen",parent_of_head_or_spouse:"red",boarder:"gray",domestic_employee:"brown",clergy:"yellow",tv:"green",mobile:"purple",radio:"maroon",fixed_tp:"blue",pc:"red",laptop:"pink",fax:"silver",fire_wood:"brown",gas:"orange",kerosene:"purple",electricity:"blue",asbestos:"gray",tile:"darkred",metal_sheet:"silver",concrete:"green",zink_aluminium_sheet:"blue",cement:"lightgray",tile_or_granite_or_terrazo:"orange",mud:"darkbrown",wood:"brown",occupants_burn:"red",occupants_bury:"orange",collected_by_local_authorities:"blue",occupants_composting_solid_waste:"green",tap_within_unit_main_line:"darkgreen",tap_within_premises_but_outside_unit_main_line:"green",tap_outside_premises_main_line:"orange",protected_well_within_premises:"blue",protected_well_outside_premises:"lightblue",unprotected_well:"purple",tube_well:"cyan",rural_water_projects:"pink",river_or_tank_or_stream:"red",bottled_water:"silver",single_house_single_floor:"darkgreen",single_house_double_floor:"green",single_house_more_than_2_floors:"lightgreen",row_house_or_line_room:"orange",attached_house_or_annex:"silver",twin_house:"cyan",flat:"blue",condominium:"purple",hut_or_shanty:"red",owned_by_a_household_member:"green",rent_or_lease_privately_owned:"blue",rent_or_lease_government_owned:"cyan",occupied_free_of_rent:"orange",encroached:"red",water_seal_and_connected_to_a_piped_sewer_system:"green",water_seal_and_connected_to_a_septic_tank:"lightgreen",pour_flush_toilet_not_water_seal:"orange",direct_pit:"red",not_using_a_toilet:"black",electricity_national_electricity_network:"blue",solar_power:"yellow",bio_gas:"orange",housing_unit:"green",collective_living_quarter:"orange",non_housing_unit:"red",semi_permanent:"orange",permanent:"green",improvised:"red",unclassified:"black",married_registered:"blue",never_married:"green",widowed:"orange",married_customary:"lightblue",separated_not_legally:"pink",divorced:"red",legally_separated:"maroon",cement_block_or_stone:"darkgray",brick:"maroon",cabook:"orange",soil_bricks:"green",plank_or_metal_sheet:"silver",cadjan_or_palmyrah:"orange",occupied:"green",vacant:"red"},T="lk_regions",C={},M="other",D={moor:"muslim",malay:"muslim",sri_lankan_tamil:"tamil",indian_tamil:"tamil",roman_catholic:"christian",other_christian:"christian"},R=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"getTable",value:function(){var e=Object(v.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat(T,"/data/gig2/").concat(t,".tsv"),e.next=3,h.d.tsv(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTableIndex",value:function(){var t=Object(v.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTable(n);case 2:return r=t.sent,a=e.getValueKeys(r[0]),t.abrupt("return",r.reduce((function(e,t){return e[t.entity_id]=Object.entries(t).reduce((function(e,t){var n=Object(g.a)(t,2),r=n[0],u=n[1];return a.includes(r)&&(u=parseFloat(u),isNaN(u)&&(u=0)),e[r]=u,e}),{}),e}),{}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getValueKeys",value:function(e){return Object.keys(e).filter((function(e){return!(e.includes("total_")||e.includes("_id")||e.includes("result_ut")||e.includes("valid")||e.includes("rejected")||e.includes("polled")||e.includes("electors"))}))}},{key:"getMaxValueKey",value:function(t){var n=e.getValueKeys(t);return n.reduce((function(e,n){return n!==M&&t[e]<t[n]&&(e=n),e}),n[0])}},{key:"getMinMaxValueP",value:function(t,n){return t.reduce((function(t,r){var a=Object(g.a)(t,2),u=a[0],c=a[1],i=e.getSumValues(r),o=r[n]/i;return[Math.min(u,o),Math.max(c,o)]}),[1,0])}},{key:"getSumValues",value:function(t){var n=e.getValueKeys(t);return h.b.sum(n.map((function(e){return t[e]})))}},{key:"getValueKeyP",value:function(t,n){var r=e.getSumValues(t);return t[n]/r}},{key:"getValueKeyColor",value:function(e){return I[e]?I[e]:(C[e]||(C[e]=h.a.getRandomHSLA()),C[e])}},{key:"getTableRowColor",value:function(t){var n=e.getMaxValueKey(t);return e.getValueKeyColor(n)}},{key:"getValuePToRankP",value:function(t,n){var r=t.map((function(t){return e.getValueKeyP(t,n)})).sort(),a=r.length;return r.reduce((function(e,t,n){return e[t]=n/a,e}),{})}},{key:"getFirstRow",value:function(e){return Object.values(e)[0]}},{key:"getTotalRow",value:function(t){var n=e.getFirstRow(t);return e.getValueKeys(n).reduce((function(e,n){return e[n]=h.b.sum(Object.values(t).map((function(e){return e[n]}))),e}),{})}},{key:"getValueSum",value:function(t){var n=e.getValueKeys(t);return h.b.sum(n.map((function(e){return t[e]})))}},{key:"expandOtherOnTableRow",value:function(e,t,n){var r=t.reduce((function(t,n){return t[n]=e[n],t}),{}),a=h.b.sum(n.map((function(t){return e[t]})));return r.other=a,r}},{key:"mergeKeysOnTableRow",value:function(e){return Object.entries(e).reduce((function(e,t){var n=Object(g.a)(t,2),r=n[0],a=n[1],u=D[r]?D[r]:r;return e[u]||(e[u]=0),e[u]+=a,e}),{})}},{key:"mergeKeysOnTable",value:function(t){return Object.entries(t).reduce((function(t,n){var r=Object(g.a)(n,2),a=r[0],u=r[1];return t[a]=e.mergeKeysOnTableRow(u),t}),{})}},{key:"mergeAndExpandOtherOnTable",value:function(t){var n=e.mergeKeysOnTable(t),r=e.getTotalRow(n),a=e.getValueKeys(r),u=e.getValueSum(r),c=a.filter((function(e){return r[e]/u>=.01&&e!==M})),i=Object.values(n).reduce((function(t,n){var r=e.getValueSum(n);return a.reduce((function(e,a){return n[a]/r>=.2&&a!==M&&t.add(a),t}))}),new Set(c)),o=Array.from(i),s=a.filter((function(e){return!i.has(e)})),l=o.map((function(e){return{key:e,value:r[e]}})).sort((function(e,t){return t.value-e.value})).map((function(e){return e.key}));return Object.entries(n).reduce((function(t,n){var r=Object(g.a)(n,2),a=r[0],u=r[1];return t[a]=e.expandOtherOnTableRow(u,l,s),t}),{})}}]),e}(),P=n(5),N={COUNTRY:"country",PROVINCE:"province",DISTRICT:"district",DSD:"dsd",GND:"gnd",PD:"pd",ED:"ed",MOH:"moh",LG:"lg",UNKNOWN:"unknown-entity"},S=Object.values(N),E=(r={},Object(P.a)(r,N.Country,"Country"),Object(P.a)(r,N.PROVINCE,"Province"),Object(P.a)(r,N.DISTRICT,"District"),Object(P.a)(r,N.DSD,"Divisional Secretariat Division"),Object(P.a)(r,N.GND,"Grama Niladhari Division"),Object(P.a)(r,N.PD,"Polling Division"),Object(P.a)(r,N.ED,"Electoral District"),Object(P.a)(r,N.MOH,"Medical Officer of Health Area"),Object(P.a)(r,N.LG,"Local Authority Area"),r),V=(a={},Object(P.a)(a,N.COUNTRY,N.PROVINCE),Object(P.a)(a,N.PROVINCE,N.DISTRICT),Object(P.a)(a,N.DISTRICT,N.DSD),Object(P.a)(a,N.DSD,N.GND),Object(P.a)(a,N.GND,void 0),Object(P.a)(a,N.PD,void 0),Object(P.a)(a,N.ED,[N.PD]),a),K=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"getEntType",value:function(e){if("LK"===e.substring(0,2))switch(e.length){case 2:return N.COUNTRY;case 4:return N.PROVINCE;case 5:return N.DISTRICT;case 7:return N.DSD;case 10:return N.GND;default:return N.UNKNOWN}if("EC"===e.substring(0,2))switch(e.length){case 5:return N.ED;case 6:return N.PD;default:return N.UNKNOWN}return"LG"===e.substring(0,2)?N.LG:"MOH"===e.substring(0,3)?N.MOH:N.UNKNOWN}},{key:"getRegionName",value:function(e){return E[e]}},{key:"getEntsByType",value:function(){var e=Object(v.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat(T,"/data/ents/").concat(t,".tsv"),e.next=3,h.d.tsv(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntIndexByType",value:function(){var t=Object(v.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntsByType(n);case 2:return r=t.sent,t.abrupt("return",r.reduce((function(e,t){return e[t.id]=t,e}),{}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllEntIndex",value:function(){var t=Object(v.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=S,t.next=3,Promise.all(n.map(function(){var t=Object(v.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntIndexByType(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return r=t.sent,t.abrupt("return",n.reduce((function(e,t,n){return e[t]=r[n],e}),{}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getEnt",value:function(){var t=Object(v.a)(l.a.mark((function t(n){var r,a,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getEntType(n),t.next=3,e.getEntIndexByType(r);case 3:if(a=t.sent,u=a[n]){t.next=7;break}return t.abrupt("return",null);case 7:return u.centroid&&(u.centroid=JSON.parse(u.centroid)),t.abrupt("return",u);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getParentToChildMap",value:function(){var e=Object(v.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"data/ents/parent_to_child_map.json",e.next=3,h.d.json("data/ents/parent_to_child_map.json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getChildType",value:function(e){return V[e]}},{key:"getChildIDs",value:function(){var t=Object(v.a)(l.a.mark((function t(n,r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntsByType(r);case 2:return a=t.sent,t.abrupt("return",a.map((function(e){return e.id})).filter((function(e){return e.includes(n)||"LK"===n})));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getEntTypeLongName",value:function(e){return E[e]?E[e]:h.c.toTitleCase(e)}}]),e}(),L=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"getMapInfoForCustomMap",value:function(){var e=Object(v.a)(l.a.mark((function e(t){var n,r,a,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat(T,"/data/custom_maps/").concat(t,".json"),e.next=3,h.d.json(n);case 3:return r=e.sent,a=r.label_to_region_ids,u=Object.keys(a).reduce((function(e,t){return e[t]={groupID:t,name:t},e}),{}),e.abrupt("return",{mapID:t,name:t,groupIndex:u,groupToRegions:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMapInfoForRegionType",value:function(){var e=Object(v.a)(l.a.mark((function e(t){var n,r,a,u,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getEntsByType(t);case 2:return n=e.sent,r=n.map((function(e){return{groupID:e.id,name:e.name}})),a=r.reduce((function(e,t){return e[t.groupID]=t,e}),{}),u=n.map((function(e){return e.id})).filter((function(e){return t!==N.PD||"P"!==e.substring(5)})),c=u.reduce((function(e,t){return e[t]=[t],e}),{}),e.abrupt("return",{mapID:"region_type_"+t,name:"By "+K.getEntTypeLongName(t),groupIndex:a,groupToRegions:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMapInfoIndex",value:function(){var t=Object(v.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.buildIndex([N.PROVINCE,N.DISTRICT,N.DSD,N.ED,N.PD],e.getMapInfoForRegionType);case 2:return n=t.sent,t.next=5,O.buildIndex(["sl_new_pds.lk-FINAL.compressed"],e.getMapInfoForCustomMap);case 5:return r=t.sent,t.abrupt("return",Object.assign({},n,r));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getGroupTableIndex",value:function(e,t){var n=R.getValueKeys(R.getFirstRow(t)),r=Object.entries(e).reduce((function(e,r){var a=Object(g.a)(r,2),u=a[0],c=a[1];return e[u]=c.reduce((function(e,r){return t[r]?Object.entries(t[r]).reduce((function(e,t){var r=Object(g.a)(t,2),a=r[0],u=r[1];return n.includes(a)&&e[a]?e[a]+=u:e[a]=u,e}),e):e}),{}),e}),{});return R.mergeAndExpandOtherOnTable(r)}}]),e}(),F=n(212),G=n(224),A=n(213),J=(n(181),n(1)),B=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.center,n=e.zoom;return Object(J.jsxs)(F.a,{center:t,zoom:n,children:[Object(J.jsx)(G.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(J.jsx)(A.a,{zoom:n,position:"bottomright"}),this.props.children]})}}]),n}(u.Component),z=n(226),U=n(225),H=n(227),W=n(219),q=n(222),Y=n(228),Q=n(238),X=n(241),Z=n(235),$=n(237),ee=n(239),te=n(240),ne=n(236);function re(e){return Object(J.jsx)(Z.a,{align:"right",width:"30",style:{fontWeight:800},children:h.c.toTitleCase(e)},"header-"+e)}function ae(e){var t=e.value,n=e.valueSum,r=e.valueKey,a=e.isMax,u=m.number(t),c=m.percent(t,n),i=t/n,o="white",s="black";a&&(o=R.getValueKeyColor(r),s="white");var l=.2;i>.5?l=i:i>.1?l=.5:i>.01&&(l=.4);var p={backgroundColor:o,opacity:l,borderRadius:3,padding:3};return Object(J.jsx)(Z.a,{align:"right",children:Object(J.jsxs)("div",{style:p,children:[Object(J.jsx)("div",{style:{fontSize:15,color:s},children:c}),Object(J.jsx)("div",{style:{fontSize:9,color:s},children:u})]})})}function ue(e){var t=e.groupTableIndex,n=e.activeMapColorTableName,r=R.getValueKeys(R.getFirstRow(t)),a=h.c.toTitleCase(n.split(".")[1]);return Object(J.jsxs)(U.a,{children:[Object(J.jsx)(ne.a,{variant:"subtitle1",component:"div",children:a}),Object(J.jsx)($.a,{sx:{position:"absolute",top:100,bottom:20,width:560},children:Object(J.jsxs)(Q.a,{stickyHeader:!0,padding:"none",children:[Object(J.jsx)(ee.a,{children:Object(J.jsxs)(te.a,{children:[Object(J.jsx)(Z.a,{align:"right",width:"5"}),Object(J.jsx)(Z.a,{align:"right",width:"80"}),r.map(re)]})}),Object(J.jsx)(X.a,{children:Object.entries(t).map((function(e,t){var n=Object(g.a)(e,2),a=n[0],u=n[1],c=R.getValueSum(u),i=R.getMaxValueKey(u);return Object(J.jsxs)(te.a,{children:[Object(J.jsx)(Z.a,{children:Object(J.jsx)(ne.a,{variant:"caption",children:"".concat(t+1,".")})}),Object(J.jsx)(Z.a,{children:a}),r.map((function(e){var t=i===e;return Object(J.jsx)(ae,{value:u[e],valueSum:c,valueKey:e,isMax:t},a+"-"+e)}))]},a)}))})]})})]})}function ce(e){var t=e.region,n=e.title;return Object(J.jsxs)(U.a,{children:[Object(J.jsx)(ne.a,{variant:"h5",children:m.number(t.pop)}),Object(J.jsx)(ne.a,{variant:"h7",children:t.groupID}),Object(J.jsx)(ne.a,{variant:"caption",children:n})]},t.groupID)}function ie(e){var t=e.popList,n=e.pCorrect,r=x.mean(t),a=r/(1+n),u=r*(1+n),c=t.filter((function(e){return a<=e&&u>=e})).length,i=t.length;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(U.a,{children:[Object(J.jsx)(ne.a,{variant:"h5",display:"inline",children:m.percent(c,i)}),Object(J.jsx)(ne.a,{variant:"h7",display:"inline",children:" "+c})]}),Object(J.jsxs)(ne.a,{variant:"caption",children:["Regions within ",m.percent(n,1)," of Mean Population (",m.number(a)," to ",m.number(u),")"]})]})}function oe(e){var t=e.groupToRegions,n=e.tableIndexIndex["regions.2012_census.ethnicity_of_population"],r=Object.keys(t).length,a=Object.entries(t).map((function(e){var t=Object(g.a)(e,2),r=t[0],a=t[1];return{groupID:r,pop:h.b.sum(a.map((function(e){return n[e]?parseInt(n[e].total_population):0})))}})).sort((function(e,t){return e.pop-t.pop})),u=a[0],c=a[r-1],i=a.map((function(e){return e.pop})),o=x.mean(i),s=x.stdev(i);return Object(J.jsxs)(U.a,{children:[Object(J.jsx)(ne.a,{variant:"h5",children:r}),Object(J.jsx)(ne.a,{variant:"caption",children:"Number of Regions"}),Object(J.jsxs)(z.a,{sx:{p:2},children:[Object(J.jsx)(ne.a,{variant:"h4",children:"Population Balance"}),Object(J.jsxs)(U.a,{children:[Object(J.jsx)(ne.a,{variant:"h5",display:"inline",children:m.number(o)}),Object(J.jsx)(ne.a,{variant:"h7",display:"inline",children:" \xb1 "+m.number(2*s)})]}),Object(J.jsx)(ne.a,{variant:"caption",children:"Mean Population \xb1 3 Standard Deviations"}),Object(J.jsx)(ce,{title:"Smallest Region",region:u}),Object(J.jsx)(ce,{title:"Largest Region",region:c}),Object(J.jsx)(U.a,{children:Object(J.jsx)(ne.a,{variant:"h5",display:"inline",children:(c.pop/u.pop).toPrecision(2)+" : 1"})}),Object(J.jsx)(ne.a,{variant:"caption",children:"Largest : Smallest"}),Object(J.jsx)(ie,{popList:i,pCorrect:.1}),Object(J.jsx)(ie,{popList:i,pCorrect:.2}),Object(J.jsx)(ie,{popList:i,pCorrect:.4})]})]})}var se={MAP_PROPS:"Map Properties",DATA:"Data"},le=se.MAP_PROPS,pe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={activeTab:le},r}return Object(b.a)(n,[{key:"onTabChange",value:function(e,t){this.setState({activeTab:t})}},{key:"render",value:function(){var e=this.props,t=e.groupToRegions,n=e.groupTableIndex,r=e.activeMapColorTableName,a=e.tableIndexIndex,u=this.state.activeTab;return Object(J.jsx)(z.a,{sx:{position:"absolute",top:20,right:20,bottom:20,width:600,zIndex:1e3},children:Object(J.jsxs)(W.a,{value:u,children:[Object(J.jsx)(U.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(J.jsx)(q.a,{onChange:this.onTabChange.bind(this),"aria-label":"lab API tabs example",children:Object.values(se).map((function(e){return Object(J.jsx)(H.a,{label:e,value:e},e)}))})}),Object(J.jsx)(Y.a,{value:se.MAP_PROPS,children:Object(J.jsx)(oe,{groupToRegions:t,tableIndexIndex:a})}),Object(J.jsx)(Y.a,{value:se.DATA,children:Object(J.jsx)(ue,{groupToRegions:t,groupTableIndex:n,activeMapColorTableName:r})})]})})}}]),n}(u.Component),be=n(47),de=n(117),fe=n(89),ve=n(41);function he(e,t){var n=Object(g.a)(e,2),r=n[0],a=n[1],u=0;for(var c in t){var i=(c-1+t.length)%t.length,o=Object(g.a)(t[c],2),s=o[0],l=o[1],p=Object(g.a)(t[i],2),b=p[0],d=p[1];l>r!==d>r&&a<(b-s)*(r-l)/(d-l)+s&&(u+=1)}return u%2===1}function ge(e,t){for(var n in t){var r=t[n];for(var a in r){if(he(e,r[a]))return!0}}return!1}var je=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"getCoordinatesForRegion",value:function(){var e=Object(v.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K.getEntType(t),r="/".concat(T,"/data/geo/").concat(n,"/").concat(t,".json"),e.next=4,h.d.json(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRegionToGeo",value:function(){var t=Object(v.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(function(){var t=Object(v.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCoordinatesForRegion(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return r=t.sent,t.abrupt("return",n.reduce((function(e,t,n){return e[t]=r[n],e}),{}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getRegionTree",value:function(){var e=Object(v.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/".concat(T,"/data/geo/region_tree.json"),e.next=3,h.d.json(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isPointInRegion",value:function(){var t=Object(v.a)(l.a.mark((function t(n,r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCoordinatesForRegion(r);case 2:return a=t.sent,t.abrupt("return",ge(n,a));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getRegionsForPoint",value:function(){var t=Object(v.a)(l.a.mark((function t(n){var r,a,u,c,i,o,s,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRegionTree();case 2:r=t.sent,a={},t.t0=l.a.keys(S);case 5:if((t.t1=t.t0()).done){t.next=24;break}u=t.t1.value,c=S[u],i=Object.keys(r),o=!1,t.t2=l.a.keys(i);case 11:if((t.t3=t.t2()).done){t.next=20;break}return s=t.t3.value,p=i[s],t.next=16,e.isPointInRegion(n,p);case 16:t.sent&&(a[c]=p,r=r[p],o=!0),t.next=11;break;case 20:if(o){t.next=22;break}return t.abrupt("break",24);case 22:t.next=5;break;case 24:return t.abrupt("return",a);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();var Oe=n(229),me=n(220),xe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.geoJSON,n=e.style,r=e.center,a=e.radius,u=Object(J.jsx)(Oe.a,{center:r,radius:a,pathOptions:n}),c={fillColor:n.fillColor,fillOpacity:n.fillOpacity/5,color:"rgba(0,0,0,0.2)",weight:n.weight};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(me.a,{data:t,style:c,onEachFeature:function(e,t){t.on({click:function(e){console.debug("Not implemented")}})}}),u]})}}]),n}(u.Component),ye=1e-7;function _e(e){return 25*Math.sqrt(e)}function ke(e){return we.apply(this,arguments)}function we(){return(we=Object(v.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(v.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.getCoordinatesForRegion(t);case 2:return e.t0=e.sent,e.abrupt("return",{type:"MultiPolygon",coordinates:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,r=de.a(n),r=fe.a(r),r=fe.b(r,ye),a=be.b(r,Object.values(r.objects)),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(v.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.join(":")+"v5",e.next=3,y.get(n,Object(v.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={groupGeoJSONList:null},r.isComponentMounted=!1,r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isComponentMounted=!0,t=this.props.groupToRegions,e.next=4,Promise.all(Object.entries(t).map(function(){var e=Object(v.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(g.a)(t,2),n[0],r=n[1],e.next=3,Ie(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:n=e.sent,this.isComponentMounted&&this.setState({groupGeoJSONList:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.groupGeoJSONList;if(!e)return null;for(var t=this.props,n=t.groupToRegions,r=t.funcGetRegionStyle,a=t.funcGetRegionPop,u=Object.keys(n),c=ve.b(e).force("x",ve.c((function(e){return ve.e(e)[1]}))).force("y",ve.d((function(e){return ve.e(e)[0]}))).force("collide",ve.a((function(e,t){return 1015e-8*_e(a(u[t]))}))).stop(),i=0;i<1e3;i++)c.tick();var o=c.nodes();return Object.entries(n).map((function(t,n){var u=Object(g.a)(t,2),c=u[0],i=(u[1],_e(a(c)));return Object(J.jsx)(xe,{geoJSON:e[n],center:[o[n].x,o[n].y],style:r(c),radius:i},"group-".concat(c))}))}}]),n}(u.Component),Me=n(234),De=n(233),Re=n(230),Pe=n(231),Ne=n(232),Se=n(88),Ee=n.n(Se),Ve=n(87),Ke=n.n(Ve),Le=[].concat([2019,2015,2010,2005,1999,1994,1988,1982].map((function(e){return{label:"".concat(e," Presidential Election"),tableName:"regions_ec.".concat(e,"_election_presidential.result"),Icon:Ke.a}})),[1989,1994,2e3,2001,2004,2010,2015,2020].map((function(e){return{label:"".concat(e," Parliamentary Election"),tableName:"regions_ec.".concat(e,"_election_parliamentary.result"),Icon:Ke.a}})),[{label:"Ethnicity",tableName:"regions.2012_census.ethnicity_of_population",Icon:Ee.a},{label:"Religion",tableName:"regions.2012_census.religious_affiliation_of_population",Icon:Ee.a}]).sort((function(e,t){return-e.tableName.localeCompare(t.tableName)}));function Fe(e){var t=e.activeMapColorTableName,n=e.onClickMapColor;return Object(J.jsx)(z.a,{sx:{position:"absolute",zIndex:1e3,left:20,bottom:20,width:300,height:420,overflow:"scroll"},children:Object(J.jsx)(De.a,{dense:!0,subheader:Object(J.jsx)(Me.a,{children:"Color Map by"}),children:Le.map((function(e){var r=e.label,a=e.tableName,u=e.Icon,c=t===a;return Object(J.jsxs)(Re.a,{selected:c,onClick:function(){n(a)},children:[Object(J.jsx)(Pe.a,{children:Object(J.jsx)(u,{})}),Object(J.jsx)(Ne.a,{primary:r})]},r)}))})})}var Ge=n(116),Ae=n.n(Ge);function Je(e){var t=e.activeMapID,n=e.onClickMap,r=e.mapInfoIndex;return Object(J.jsx)(z.a,{sx:{position:"absolute",zIndex:1e3,left:20,top:20,width:200,height:300},children:Object(J.jsx)(De.a,{dense:!0,subheader:Object(J.jsx)(Me.a,{children:"Split Regions by"}),children:Object.keys(r).map((function(e){var r=t===e;return Object(J.jsxs)(Re.a,{selected:r,onClick:function(){n(e)},children:[Object(J.jsx)(Pe.a,{children:Object(J.jsx)(Ae.a,{})}),Object(J.jsx)(Ne.a,{primary:K.getEntTypeLongName(e)})]},e)}))})})}var Be=[7.9,81.5],ze=N.PROVINCE,Ue=Le.map((function(e){return e.tableName})),He=Ue[0],We="white";function qe(){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(v.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.buildIndex(Ue,R.getTableIndex);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={activeMapID:ze,mapInfoIndex:void 0,groupIndex:void 0,activeGroupID:void 0,tableIndexIndex:void 0,activeMapColorTableName:He},r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.activeMapID,r=t.activeMapColorTableName,e.next=3,this.updateMap(n,r);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMap",value:function(){var e=Object(v.a)(l.a.mark((function e(t,n){var r,a,u,c,i,o,s,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=this.state.mapInfoIndex)){e.next=5;break}return e.next=4,L.getMapInfoIndex();case 4:r=e.sent;case 5:if(a=r[t],u=a.groupIndex,c=a.groupToRegions,i=Object.keys(u)[0],void 0!==(o=this.state.tableIndexIndex)){e.next=12;break}return e.next=11,qe();case 11:o=e.sent;case 12:s=o[n],p=L.getGroupTableIndex(c,s),this.setState({activeMapID:t,activeMapColorTableName:n,mapInfoIndex:r,groupIndex:u,groupToRegions:c,activeGroupID:i,tableIndexIndex:o,activeTableIndex:s,groupTableIndex:p});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onClickMapColor",value:function(){var e=Object(v.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMap(this.state.activeMapID,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onClickMap",value:function(){var e=Object(v.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMap(t,this.state.activeMapColorTableName);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.groupIndex,n=e.groupToRegions,r=e.activeGroupID,a=e.mapInfoIndex,u=e.tableIndexIndex,c=e.activeMapColorTableName,i=e.activeMapID,o=e.activeTableIndex,s=e.groupTableIndex;if(!t)return"Loading...";return Object(J.jsxs)("div",{children:[Object(J.jsx)(B,{center:Be,zoom:8,children:Object(J.jsx)(Ce,{groupToRegions:n,activeGroupID:r,funcGetRegionStyle:function(e){var t=s[e],n=.1,r="gray";if(!t)return{fillColor:r,fillOpacity:n,color:We,weight:1};var a=R.getMaxValueKey(t);return n=R.getValueKeyP(t,a),{fillColor:r=R.getTableRowColor(t),fillOpacity:n,color:We,weight:1}},funcGetRegionPop:function(e){var t=s[e];return h.b.sum(Object.values(t))}},"multi-region-view-".concat(i))}),Object(J.jsx)(Je,{activeMapID:i,onClickMap:this.onClickMap.bind(this),mapInfoIndex:a}),Object(J.jsx)(Fe,{activeMapColorTableName:c,onClickMapColor:this.onClickMapColor.bind(this)}),Object(J.jsx)(pe,{groupIndex:t,groupToRegions:n,activeGroupID:r,activeTableIndex:o,activeMapColorTableName:c,tableIndexIndex:u,groupTableIndex:s})]})}}]),n}(u.Component);var Xe=function(){return Object(J.jsx)(Qe,{})},Ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,242)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,u=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),u(e),c(e)}))};o.a.render(Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(Xe,{})}),document.getElementById("root")),Ze()}},[[191,1,2]]]);
//# sourceMappingURL=main.471d668c.chunk.js.map