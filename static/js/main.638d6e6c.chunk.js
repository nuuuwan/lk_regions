(this.webpackJsonptemplate_react=this.webpackJsonptemplate_react||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var r,a,o=n(0),i=n.n(o),c=n(35),u=n.n(c),s=(n(116),n(117),n(4)),l=n.n(s),p=n(15),d=n(16),f=n(29),b=n(28),h=n(11),v=n(10),g=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,null,[{key:"buildIndex",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(h.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,e.abrupt("return",t.reduce((function(e,t,n){return e[t]=r[n],e}),{}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"invertDict",value:function(e){return Object.entries(e).reduce((function(e,t){var n=Object(v.a)(t,2),r=n[0],a=n[1];return a&&(e[a]||(e[a]=[]),e[a].push(r)),e}),{})}}]),e}(),j=n(34),_="hsl(355, 63%, 34%)",O="hsl(21, 100%, 50%)",x="hsl(165, 100%, 17%)",m={SLFP:"blue",PA:"blue",UPFA:"blue",SLPP:_,UNP:"green",NDF:"green",JVP:"red",LSSP:"red",ACTC:O,SLMP:"purple",other:"ghostwhite",others:"gray",bharatha:"cyan",burgher:"purple",chetty:"blue",indian_tamil:O,malay:x,moor:x,sinhalese:_,sri_lankan_tamil:O,buddhist:"hsl(43, 100%, 50%)",islam:x,hindu:O,roman_catholic:"purple",other_christian:"blue",female:"pink",male:"lightblue",son_or_daughter:"green",head:"blue",wife_or_husband:"pink",grandchild_or_great_grand_child:"darkgreen",other_relative:"yellow",non_relative:"silver",son_or_daughter_in_law:"lightgreen",parent_of_head_or_spouse:"red",boarder:"gray",domestic_employee:"brown",clergy:"yellow",tv:"green",mobile:"purple",radio:"maroon",fixed_tp:"blue",pc:"red",laptop:"pink",fax:"silver",fire_wood:"brown",gas:"orange",kerosene:"purple",electricity:"blue",asbestos:"gray",tile:"darkred",metal_sheet:"silver",concrete:"green",zink_aluminium_sheet:"blue",cement:"lightgray",tile_or_granite_or_terrazo:"orange",mud:"darkbrown",wood:"brown",occupants_burn:"red",occupants_bury:"orange",collected_by_local_authorities:"blue",occupants_composting_solid_waste:"green",tap_within_unit_main_line:"darkgreen",tap_within_premises_but_outside_unit_main_line:"green",tap_outside_premises_main_line:"orange",protected_well_within_premises:"blue",protected_well_outside_premises:"lightblue",unprotected_well:"purple",tube_well:"cyan",rural_water_projects:"pink",river_or_tank_or_stream:"red",bottled_water:"silver",single_house_single_floor:"darkgreen",single_house_double_floor:"green",single_house_more_than_2_floors:"lightgreen",row_house_or_line_room:"orange",attached_house_or_annex:"silver",twin_house:"cyan",flat:"blue",condominium:"purple",hut_or_shanty:"red",owned_by_a_household_member:"green",rent_or_lease_privately_owned:"blue",rent_or_lease_government_owned:"cyan",occupied_free_of_rent:"orange",encroached:"red",water_seal_and_connected_to_a_piped_sewer_system:"green",water_seal_and_connected_to_a_septic_tank:"lightgreen",pour_flush_toilet_not_water_seal:"orange",direct_pit:"red",not_using_a_toilet:"black",electricity_national_electricity_network:"blue",solar_power:"yellow",bio_gas:"orange",housing_unit:"green",collective_living_quarter:"orange",non_housing_unit:"red",semi_permanent:"orange",permanent:"green",improvised:"red",unclassified:"black",married_registered:"blue",never_married:"green",widowed:"orange",married_customary:"lightblue",separated_not_legally:"pink",divorced:"red",legally_separated:"maroon",cement_block_or_stone:"darkgray",brick:"maroon",cabook:"orange",soil_bricks:"green",plank_or_metal_sheet:"silver",cadjan_or_palmyrah:"orange",occupied:"green",vacant:"red"},y="lk_regions",k={},w=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,null,[{key:"getTable",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat(y,"/data/gig2/").concat(t,".tsv"),e.next=3,j.d.tsv(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTableIndex",value:function(){var t=Object(h.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTable(n);case 2:return r=t.sent,a=e.filterValueCellKeys(r[0]),t.abrupt("return",r.reduce((function(e,t){return e[t.entity_id]=Object.entries(t).reduce((function(e,t){var n=Object(v.a)(t,2),r=n[0],o=n[1];return a.includes(r)&&(o=parseFloat(o)),e[r]=o,e}),{}),e}),{}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"filterValueCellKeys",value:function(e){return Object.keys(e).filter((function(e){return!(e.includes("total_")||e.includes("_id")||e.includes("result_ut")||e.includes("valid")||e.includes("rejected")||e.includes("polled")||e.includes("electors"))}))}},{key:"getMaxValueKey",value:function(t){var n=e.filterValueCellKeys(t);return n.reduce((function(e,n){return t[e]<t[n]&&(e=n),e}),n[0])}},{key:"getMinMaxValueP",value:function(t,n){return t.reduce((function(t,r){var a=Object(v.a)(t,2),o=a[0],i=a[1],c=e.getSumValues(r),u=r[n]/c;return[Math.min(o,u),Math.max(i,u)]}),[1,0])}},{key:"getSumValues",value:function(t){var n=e.filterValueCellKeys(t);return j.b.sum(n.map((function(e){return t[e]})))}},{key:"getValueKeyP",value:function(t,n){var r=e.getSumValues(t);return t[n]/r}},{key:"getValueKeyColor",value:function(e){return m[e]?m[e]:(k[e]||(k[e]=j.a.getRandomHSLA()),k[e])}},{key:"getTableRowColor",value:function(t){var n=e.getMaxValueKey(t);return e.getValueKeyColor(n)}},{key:"getValuePToRankP",value:function(t,n){var r=t.map((function(t){return e.getValueKeyP(t,n)})).sort(),a=r.length;return r.reduce((function(e,t,n){return e[t]=n/a,e}),{})}}]),e}(),I=n(3),C={COUNTRY:"country",PROVINCE:"province",DISTRICT:"district",DSD:"dsd",GND:"gnd",PD:"pd",ED:"ed",MOH:"moh",LG:"lg",UNKNOWN:"unknown-entity"},D=Object.values(C),T=(r={},Object(I.a)(r,C.Country,"Country"),Object(I.a)(r,C.PROVINCE,"Province"),Object(I.a)(r,C.DISTRICT,"District"),Object(I.a)(r,C.DSD,"Divisional Secretariat Division"),Object(I.a)(r,C.GND,"Grama Niladhari Division"),Object(I.a)(r,C.PD,"Polling Division"),Object(I.a)(r,C.ED,"Electoral District"),Object(I.a)(r,C.MOH,"Medical Officer of Health Area"),Object(I.a)(r,C.LG,"Local Authority Area"),r),G=(a={},Object(I.a)(a,C.COUNTRY,C.PROVINCE),Object(I.a)(a,C.PROVINCE,C.DISTRICT),Object(I.a)(a,C.DISTRICT,C.DSD),Object(I.a)(a,C.DSD,C.GND),Object(I.a)(a,C.GND,void 0),Object(I.a)(a,C.PD,void 0),Object(I.a)(a,C.ED,[C.PD]),a),S=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,null,[{key:"getEntType",value:function(e){if("LK"===e.substring(0,2))switch(e.length){case 2:return C.COUNTRY;case 4:return C.PROVINCE;case 5:return C.DISTRICT;case 7:return C.DSD;case 10:return C.GND;default:return C.UNKNOWN}if("EC"===e.substring(0,2))switch(e.length){case 5:return C.ED;case 6:return C.PD;default:return C.UNKNOWN}return"LG"===e.substring(0,2)?C.LG:"MOH"===e.substring(0,3)?C.MOH:C.UNKNOWN}},{key:"getRegionName",value:function(e){return T[e]}},{key:"getEntsByType",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat(y,"/data/ents/").concat(t,".tsv"),e.next=3,j.d.tsv(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntIndexByType",value:function(){var t=Object(h.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntsByType(n);case 2:return r=t.sent,t.abrupt("return",r.reduce((function(e,t){return e[t.id]=t,e}),{}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllEntIndex",value:function(){var t=Object(h.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=D,t.next=3,Promise.all(n.map(function(){var t=Object(h.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntIndexByType(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return r=t.sent,t.abrupt("return",n.reduce((function(e,t,n){return e[t]=r[n],e}),{}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getEnt",value:function(){var t=Object(h.a)(l.a.mark((function t(n){var r,a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getEntType(n),t.next=3,e.getEntIndexByType(r);case 3:return a=t.sent,(o=a[n]).centroid&&(o.centroid=JSON.parse(o.centroid)),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getParentToChildMap",value:function(){var e=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"data/ents/parent_to_child_map.json",e.next=3,j.d.json("data/ents/parent_to_child_map.json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getChildType",value:function(e){return G[e]}},{key:"getChildIDs",value:function(){var t=Object(h.a)(l.a.mark((function t(n,r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEntsByType(r);case 2:return a=t.sent,t.abrupt("return",a.map((function(e){return e.id})).filter((function(e){return e.includes(n)||"LK"===n})));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getEntTypeLongName",value:function(e){return T[e]?T[e]:j.c.toTitleCase(e)}}]),e}(),N=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,null,[{key:"getGroupDataForRegionType",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r,a,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getEntsByType(t);case 2:return n=e.sent,r=n.map((function(e){return{groupID:e.id,name:e.name}})),a=r.reduce((function(e,t){return e[t.groupID]=t,e}),{}),o=n.map((function(e){return e.id})).filter((function(e){return t!==C.PD||"P"!==e.substring(5)})),i=o.reduce((function(e,t){return e[t]=t,e}),{}),e.abrupt("return",{mapID:"by_"+t,name:"By "+S.getEntTypeLongName(t),groupIndex:a,regionToGroup:i});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMapInfoIndex",value:function(){var t=Object(h.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([C.PROVINCE,C.DISTRICT,C.DSD,C.ED,C.PD].map(function(){var t=Object(h.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGroupDataForRegionType(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return n=t.sent,t.abrupt("return",n.reduce((function(e,t){return e[t.mapID]=t,e}),{}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}(),M=n(160),R=n(174),P=n(161),E=(n(119),n(1)),V=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.center,n=e.zoom;return Object(E.jsxs)(M.a,{center:t,zoom:n,children:[Object(E.jsx)(R.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(E.jsx)(P.a,{zoom:n,position:"bottomright"}),this.props.children]})}}]),n}(o.Component),A=n(176),L=n(175),K=n(177),F=n(165),U=n(169),z=n(178),B=n(172),H=n(183),J=n(95),W=n.n(J),Y=n(173),Q=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={regionEnt:void 0},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getEnt(this.props.regionID);case 2:t=e.sent,this.setState({regionEnt:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.regionEnt,t=this.props.regionID;if(!e)return Object(E.jsx)(Y.a,{label:t});var n=S.getEntType(t);return Object(E.jsx)(Y.a,{sx:{m:.2},label:Object(E.jsxs)(B.a,{container:!0,direction:"row",alignItems:"center",children:[Object(E.jsx)(B.a,{item:!0,children:Object(E.jsx)(H.a,{variant:"body2",sx:{fontSize:9,fontWeight:800},children:e.name})}),Object(E.jsx)(B.a,{item:!0,children:Object(E.jsx)(H.a,{variant:"body2",sx:{paddingLeft:.5,fontSize:9},children:n.toUpperCase()})})]})})}}]),n}(o.Component);function q(e){var t=e.groupIndex,n=e.regionToGroup,r=e.onClickGroup,a=e.activeGroupID,o=g.invertDict(n);return Object(E.jsx)(L.a,{children:Object.entries(t).map((function(e,t){var n=Object(v.a)(e,2),i=n[0],c=n[1],u=o[i];u||(u=[]);var s=a===i?"red":"white",l="group-".concat(i);return Object(E.jsxs)(L.a,{onClick:function(){r(i)},children:[Object(E.jsxs)(B.a,{container:!0,direction:"row",alignItems:"center",children:[Object(E.jsx)(B.a,{item:!0,children:Object(E.jsx)(H.a,{variant:"overline",children:c.name})}),Object(E.jsx)(B.a,{item:!0,children:Object(E.jsx)(W.a,{sx:{color:s},fontSize:"smallest"})})]}),Object(E.jsx)(L.a,{sx:{paddingBottom:2},children:u.map((function(e,t){var n="region-".concat(e);return Object(E.jsx)(Q,{regionID:e},n)}))})]},l)}))})}var X={DATA:"Data",MAP_QUALITY:"Map Quality",REGIONS:"Regions"},Z=X.REGIONS,$=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={activeTab:Z},r}return Object(d.a)(n,[{key:"onTabChange",value:function(e,t){this.setState({activeTab:t})}},{key:"render",value:function(){var e=this.props,t=e.groupIndex,n=e.regionToGroup,r=e.onClickGroup,a=e.activeGroupID,o=this.state.activeTab;return Object(E.jsx)(A.a,{sx:{position:"absolute",top:10,right:10,width:400,height:"70vh",m:2,p:2,zIndex:1e3,overflow:"scroll"},children:Object(E.jsxs)(F.a,{value:o,children:[Object(E.jsx)(L.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(E.jsx)(U.a,{onChange:this.onTabChange.bind(this),"aria-label":"lab API tabs example",children:[X.DATA,X.MAP_QUALITY,X.REGIONS].map((function(e){return Object(E.jsx)(K.a,{label:e,value:e})}))})}),Object(E.jsx)(z.a,{value:X.DATA,children:"TODO"}),Object(E.jsx)(z.a,{value:X.MAP_QUALITY,children:"TODO"}),Object(E.jsx)(z.a,{value:X.REGIONS,children:Object(E.jsx)(q,{groupIndex:t,regionToGroup:n,onClickGroup:r,activeGroupID:a})})]})})}}]),n}(o.Component),ee=n(168),te=n(179),ne=n(170),re=n(166),ae=n(180),oe=n(181),ie=n(96),ce=n.n(ie),ue=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.showGroupSelector,n=e.onGroupSelectorHide,r=e.mapInfoIndex,a=e.onClickMap;return Object(E.jsx)(ee.a,{anchor:"right",open:t,onClose:n,sx:{width:400},children:Object(E.jsx)(A.a,{sx:{width:400},children:Object(E.jsx)(L.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:Object(E.jsx)(te.a,{children:Object.entries(r).map((function(e,t){var n=Object(v.a)(e,2),r=n[0],o=n[1],i="map-info-".concat(t);return Object(E.jsx)(ne.a,{disablePadding:!0,onClick:function(e){a(r)},children:Object(E.jsxs)(re.a,{children:[Object(E.jsx)(ae.a,{children:Object(E.jsx)(ce.a,{})}),Object(E.jsx)(oe.a,{primary:o.name})]})},i)}))})})})})}}]),n}(o.Component),se=n(167);function le(e,t){var n=Object(v.a)(e,2),r=n[0],a=n[1],o=0;for(var i in t){var c=(i-1+t.length)%t.length,u=Object(v.a)(t[i],2),s=u[0],l=u[1],p=Object(v.a)(t[c],2),d=p[0],f=p[1];l>r!==f>r&&a<(d-s)*(r-l)/(f-l)+s&&(o+=1)}return o%2===1}function pe(e,t){for(var n in t){var r=t[n];for(var a in r){if(le(e,r[a]))return!0}}return!1}var de=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,null,[{key:"getCoordinatesForRegion",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.getEntType(t),r="/".concat(y,"/data/geo/").concat(n,"/").concat(t,".json"),e.next=4,j.d.json(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRegionToGeo",value:function(){var t=Object(h.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(function(){var t=Object(h.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCoordinatesForRegion(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return r=t.sent,t.abrupt("return",n.reduce((function(e,t,n){return e[t]=r[n],e}),{}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getRegionTree",value:function(){var e=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/".concat(y,"/data/geo/region_tree.json"),e.next=3,j.d.json(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isPointInRegion",value:function(){var t=Object(h.a)(l.a.mark((function t(n,r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCoordinatesForRegion(r);case 2:return a=t.sent,t.abrupt("return",pe(n,a));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getRegionsForPoint",value:function(){var t=Object(h.a)(l.a.mark((function t(n){var r,a,o,i,c,u,s,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRegionTree();case 2:r=t.sent,a={},t.t0=l.a.keys(D);case 5:if((t.t1=t.t0()).done){t.next=24;break}o=t.t1.value,i=D[o],c=Object.keys(r),u=!1,t.t2=l.a.keys(c);case 11:if((t.t3=t.t2()).done){t.next=20;break}return s=t.t3.value,p=c[s],t.next=16,e.isPointInRegion(n,p);case 16:t.sent&&(a[i]=p,r=r[p],u=!0),t.next=11;break;case 20:if(u){t.next=22;break}return t.abrupt("break",24);case 22:t.next=5;break;case 24:return t.abrupt("return",a);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();var fe=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={geoJSON:null},r.isComponentMounted=!1,r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isComponentMounted=!0,t=this.props.regionID,e.next=4,de.getCoordinatesForRegion(t);case 4:n=e.sent,r={type:"MultiPolygon",coordinates:n},this.isComponentMounted&&this.setState({geoJSON:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"compoentnDidUnmount",value:function(){this.isComponentMounted=!1}},{key:"render",value:function(){var e=this.state.geoJSON;if(null===e)return null;var t=this.props,n=t.regionID,r=t.color,a=t.onClickRegion,o={fillColor:r,color:"gray",weight:1,fillOpacity:.8};return Object(E.jsx)(se.a,{data:e,style:o,onEachFeature:function(e,t){t.on({click:function(e){a(n,e.originalEvent.altKey)}})}},"geo-json-".concat(n))}}]),n}(o.Component);function be(e){var t=e.regionToGroup,n=e.onClickRegion,r=e.funcGetRegionColor;return Object.entries(t).map((function(e,t){var a=Object(v.a)(e,2),o=a[0],i=(a[1],"region-".concat(o));return Object(E.jsx)(fe,{regionID:o,onClickRegion:n,color:r(o)},i)}))}var he=n(182),ve=n(86),ge=n.n(ve),je=n(97),_e=n.n(je),Oe=[{label:"Ethnicity",tableName:"regions.2012_census.ethnicity_of_population",Icon:ge.a},{label:"Religion",tableName:"regions.2012_census.religious_affiliation_of_population",Icon:ge.a},{label:"2019 Presidential Election",tableName:"regions_ec.2019_election_presidential.result",Icon:_e.a}];function xe(e){var t=e.activeMapColorTableName,n=e.onClickMapColor;return Object(E.jsx)(A.a,{sx:{position:"absolute",zIndex:1e3,left:10,bottom:10,width:300,height:200,m:1,p:1},children:Object(E.jsx)(te.a,{subheader:Object(E.jsx)(he.a,{children:"Color Map by"}),children:Oe.map((function(e){var r=e.label,a=e.tableName,o=e.Icon,i=t===a;return Object(E.jsxs)(re.a,{selected:i,onClick:function(){n(a)},children:[Object(E.jsx)(ae.a,{children:Object(E.jsx)(o,{})}),Object(E.jsx)(oe.a,{primary:r})]},r)}))})})}var me=[6.9157,79.8636],ye=Oe.map((function(e){return e.tableName}));function ke(){return we.apply(this,arguments)}function we(){return(we=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.buildIndex(ye,w.getTableIndex);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ie=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={selectedMapID:"by_province",mapInfoIndex:void 0,groupIndex:void 0,activeGroupID:void 0,tableIndexIndex:void 0,activeMapColorTableName:ye[0],showGroupSelector:!1},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.selectedMapID,e.next=3,this.updateMap(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMap",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r,a,o,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getMapInfoIndex();case 2:if(n=e.sent,r=n[t],a=r.groupIndex,o=r.regionToGroup,i=Object.keys(a)[0],void 0!==(c=this.state.tableIndexIndex)){e.next=10;break}return e.next=9,ke();case 9:c=e.sent;case 10:this.setState({mapInfoIndex:n,groupIndex:a,regionToGroup:o,activeGroupID:i,selectedMapID:t,tableIndexIndex:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"expandRegion",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r,a,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.regionToGroup,r=S.getEntType(t),a=S.getChildType(r),e.next=5,S.getChildIDs(t,a);case 5:o=e.sent,i=n[t],delete(n=o.reduce((function(e,t){return e[t]=i,e}),n))[t],this.setState({regionToGroup:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onClickRegion",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,this.expandRegion(t);case 3:e.next=8;break;case 5:r=this.state,a=r.regionToGroup,o=r.activeGroupID,a[t]=a[t]===o?void 0:o,this.setState({regionToGroup:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onClickGroup",value:function(e){this.setState({activeGroupID:e})}},{key:"onGroupSelectorShow",value:function(){this.setState({showGroupSelector:!0})}},{key:"onGroupSelectorHide",value:function(){this.setState({showGroupSelector:!1})}},{key:"onClickMap",value:function(){var e=Object(h.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateMap(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onClickMapColor",value:function(e){this.setState({activeMapColorTableName:e})}},{key:"render",value:function(){var e=this.state,t=e.groupIndex,n=e.showGroupSelector,r=e.regionToGroup,a=e.activeGroupID,o=e.mapInfoIndex,i=e.tableIndexIndex,c=e.activeMapColorTableName;if(!t)return"...";return Object(E.jsxs)("div",{children:[Object(E.jsx)(V,{center:me,zoom:8,children:Object(E.jsx)(be,{regionToGroup:r,activeGroupID:a,onClickRegion:this.onClickRegion.bind(this),funcGetRegionColor:function(e){var t=i[c][e];return w.getTableRowColor(t)}})}),Object(E.jsx)($,{groupIndex:t,regionToGroup:r,onClickGroup:this.onClickGroup.bind(this),activeGroupID:a}),Object(E.jsx)(ue,{showGroupSelector:n,onGroupSelectorHide:this.onGroupSelectorHide.bind(this),mapInfoIndex:o,onClickMap:this.onClickMap.bind(this)}),Object(E.jsx)(xe,{activeMapColorTableName:c,onClickMapColor:this.onClickMapColor.bind(this)})]})}}]),n}(o.Component);var Ce=function(){return Object(E.jsx)(Ie,{})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,184)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};u.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(Ce,{})}),document.getElementById("root")),De()}},[[129,1,2]]]);
//# sourceMappingURL=main.638d6e6c.chunk.js.map